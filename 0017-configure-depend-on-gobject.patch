From a34b3c50e78046e41520b217c6493fed66e569fa Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Marc-Andr=C3=A9=20Lureau?= <marcandre.lureau@redhat.com>
Date: Fri, 22 Mar 2019 16:12:40 +0100
Subject: [PATCH 17/23] configure: depend on gobject
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The following patches are going to introduce GObject.  It's not a big
change, since usually glib comes installed with gobject on most systems.

Signed-off-by: Marc-Andr√© Lureau <marcandre.lureau@redhat.com>
---
 Makefile.am  | 12 ++++++------
 configure.ac |  2 +-
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index 3b97de5..eb39dcb 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -17,7 +17,7 @@ src_spice_vdagent_CFLAGS =			\
 	$(DRM_CFLAGS)				\
 	$(X_CFLAGS)				\
 	$(SPICE_CFLAGS)				\
-	$(GLIB2_CFLAGS)				\
+	$(GOBJECT_CFLAGS)				\
 	$(GTK_CFLAGS)				\
 	$(ALSA_CFLAGS)				\
 	-I$(srcdir)/src				\
@@ -28,7 +28,7 @@ src_spice_vdagent_LDADD =			\
 	$(DRM_LIBS)				\
 	$(X_LIBS)				\
 	$(SPICE_LIBS)				\
-	$(GLIB2_LIBS)				\
+	$(GOBJECT_LIBS)				\
 	$(GTK_LIBS)				\
 	$(ALSA_LIBS)				\
 	$(NULL)
@@ -52,7 +52,7 @@ src_spice_vdagent_SOURCES =			\
 
 tests_test_file_xfers_CFLAGS =			\
 	$(SPICE_CFLAGS)				\
-	$(GLIB2_CFLAGS)				\
+	$(GOBJECT_CFLAGS)				\
 	-I$(srcdir)/src				\
 	-I$(srcdir)/src/vdagent			\
 	-DUDSCS_NO_SERVER			\
@@ -60,7 +60,7 @@ tests_test_file_xfers_CFLAGS =			\
 
 tests_test_file_xfers_LDADD =			\
 	$(SPICE_LIBS)				\
-	$(GLIB2_LIBS)				\
+	$(GOBJECT_LIBS)				\
 	$(NULL)
 
 tests_test_file_xfers_SOURCES =			\
@@ -76,7 +76,7 @@ src_spice_vdagentd_CFLAGS =			\
 	$(LIBSYSTEMD_LOGIN_CFLAGS)		\
 	$(PCIACCESS_CFLAGS)			\
 	$(SPICE_CFLAGS)				\
-	$(GLIB2_CFLAGS)				\
+	$(GOBJECT_CFLAGS)				\
 	$(PIE_CFLAGS)				\
 	-I$(srcdir)/src				\
 	$(NULL)
@@ -87,7 +87,7 @@ src_spice_vdagentd_LDADD =			\
 	$(LIBSYSTEMD_LOGIN_LIBS)		\
 	$(PCIACCESS_LIBS)			\
 	$(SPICE_LIBS)				\
-	$(GLIB2_LIBS)				\
+	$(GOBJECT_LIBS)				\
 	$(PIE_LDFLAGS)				\
 	$(NULL)
 
diff --git a/configure.ac b/configure.ac
index 7054c17..e77c452 100644
--- a/configure.ac
+++ b/configure.ac
@@ -100,7 +100,7 @@ AC_ARG_ENABLE([static-uinput],
               [enable_static_uinput="$enableval"],
               [enable_static_uinput="no"])
 
-PKG_CHECK_MODULES([GLIB2], [glib-2.0 >= 2.34])
+PKG_CHECK_MODULES([GOBJECT], [gobject-2.0 >= 2.34])
 PKG_CHECK_MODULES(X, [xfixes xrandr >= 1.3 xinerama x11])
 PKG_CHECK_MODULES(SPICE, [spice-protocol >= 0.14.0])
 PKG_CHECK_MODULES(ALSA, [alsa >= 1.0.22])
-- 
2.23.0

